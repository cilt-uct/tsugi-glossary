<style>
  ul {
    -webkit-column-count: 3;
    /* -moz-column-count: 3; */
    column-count: 3;
    float: left;
    /* width: 33.33%; */
  }
</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 

<article id="glossary-body">
  <div class="emt-container-inner">
    <div class="root responsivegrid">
      <div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
        <div class="responsivegrid aem-GridColumn aem-GridColumn--default--12">
          <div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
            <div class="globalsite cmp-globalsite-hero js-hero-check oldviz aem-GridColumn aem-GridColumn--default--12">
              <section>
            <div class='page-header'>
                  <h1 data-en-heading="Glossary" style="color:#002856">Vula Glossary</h1>
                </div>

                <button type="button" id="btn_new_term" name="btn_new_term" class="btn btn-primary btn-xs pull-right" data-action="new-term">
                  <i class="fa fa-plus" aria-hidden="true"></i>
                  New term
                </button>
              </section>
            </div>

            <!-- <div  id="alphabet">
                <ul>
                  {% foreach ($displayDomains as $x => $val) { %}
                  <li  onload = "genCharArray()">
                    {{['genCharArray()'] }}
                  </li>
                  {% } %}
              </ul>
            </div> -->
            <!-- {% foreach ($displayList as $x => $domain) { %}
            <div class="globalsite cmp-globalsite-glossarysearchrelatedterms oldviz aem-GridColumn aem-GridColumn--default--12">
              <h4>Top {{ $domain['name'] }} Terms</h4>
              <section class="grid-norm no-top  ">
                  <dl>
                    {% foreach ($domain['terms'] as $x => $term) { %}
                    <div class="alert alert-info" role="alert">
                      <dt>
                        {{ $term['term'] }} 
                        <button type="button" data-term_id="{{ $term['id'] }}" data-term_name="{{ $term['term'] }}" data-term_domain="{{ $term['domain_name'] }}"
                          data-term_description="{{ $term['description'] }}" class="btn btn-primary-outline btn-xs" data-action="edit-term"><i class="fa fa-pencil fa-xs" aria-hidden="true"></i></button>
                        <button type="button" data-term_id="{{ $term['id'] }}" data-term_name="{{ $term['term'] }}" data-term_domain="{{ $term['domain_name'] }}"
                          data-term_description="{{ $term['description'] }}" class="btn btn-xs btn-primary-outline" data-action="delete-term" id="btn_delete"><i class="fa fa-trash fa-xs fa-danger" aria-hidden="true"></i></button></dt>
                      <dd>{{ $term['description'] }}</dd>
                    </div>
                    {% } %}
                  </dl>
               </section>
            </div>
            {% } %} -->

            {% foreach ($displayList as $x => $domain) { %}
            <div class="globalsite cmp-globalsite-glossarysearchrelatedterms oldviz aem-GridColumn aem-GridColumn--default--12">

              <section class="grid-norm no-top">
                <div class="row">
                  <h4>Top {{ $domain['name'] }} Terms</h4>
                  <dl>
                    {% foreach ($domain['terms'] as $x => $term) { %}
                    <div class="col-sm-4 col-md-4">
                      <div class="alert custom-alert" role="alert">
                        <dt>
                          <div class="row d-flex justify-content-between align-items-center">
                            <div class="col-sm-8">
                              {{ $term['term'] }} 
                            </div>
                            <div class="col-sm-4" id="action_buttons">
                              <button type="button" data-term_id="{{ $term['id'] }}" data-term_name="{{ $term['term'] }}" data-term_domain="{{ $term['domain_name'] }}"
                                data-term_description="{{ $term['description'] }}" class="btn btn-xs btn-outline-secondary pull-right" data-action="delete-term" id="btn_delete">
                                <i class="fa fa-trash fa-xs text-danger" aria-hidden="true" data-term_id="{{ $term['id'] }}" data-term_name="{{ $term['term'] }}" data-term_domain="{{ $term['domain_name'] }}"
                                data-term_description="{{ $term['description'] }}" data-action="delete-term" id="btn_delete"></i>
                              </button>
                            
                              <button type="button" data-term_id="{{ $term['id'] }}" data-term_name="{{ $term['term'] }}" data-term_domain="{{ $term['domain_name'] }}"
                                data-term_description="{{ $term['description'] }}" class="btn btn-xs btn-outline-secondary pull-right" data-action="edit-term">
                                <i class="fa fa-pencil fa-xs text-info" aria-hidden="true" data-term_id="{{ $term['id'] }}" data-term_name="{{ $term['term'] }}" data-term_domain="{{ $term['domain_name'] }}"
                                data-term_description="{{ $term['description'] }}" data-action="edit-term"></i>
                              </button>

                            </div>
                          </div>
                        </dt>
                        <dd>{{ $term['description'] }}</dd>
                      </div>
                    </div>
                    {% if (($x + 1) % 3 == 0) { %}
                    </div>
                    <div class="row">
                    {% } %}
                    {% } %}
                  </dl>
                </div>
              </section>
            </div>
            {% } %}

            <div class="globalsite cmp-globalsite-button oldviz aem-GridColumn aem-GridColumn--default--12">
              <div class="grid-norm no-top-bottom rmg-b30 ">

                <div class="light-bg" align="left">
                  <a data-en-title="View All Glossary Terms" data-placement="auto" href="{{ $search_url }}"
                    role="button" class=" btn btBtn btnNormalWidth btn-arrow  " target="_self">
                    <button onclick="fetchAllTerms()"> View All Glossary Terms >>></button>
                    <!-- <span class="text-link-arrow gcom-icon-angle-right">>>></span> -->
                  </a>
                </div>
              </div>
            </div>
            <div class="globalsite cmp-globalsite-freeform oldviz aem-GridColumn aem-GridColumn--default--12">
              <style type="text/css">
                .globalsite.cmp-globalsite-glossarysearchrelatedterms.aem-GridColumn.aem-GridColumn--default--12 .grid-norm {
                  margin-bottom: 0px;
                }
              </style>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="termModal" tabindex="-1" role="dialog" aria-labelledby="termModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <form id="termForm" name="termForm">
        <input type="hidden" id="inp_term_type" name="inp_term_type" value=""/>
        <input type="hidden" id="inp_term_id" name="inp_term_id" value=""/>       
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="termModalLabel">Title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div id="termDetailsDiv">
              <div class="form-group  dropdown" id="faculty-section">
                <button type="button" class="btn btn-secondary dropdown-toggle" id="btn_domain_list"type="button" data-toggle="dropdown">
                  Choose Faculty
                <span class="caret"></span></button>
                <ul name="domain-dropdown" class="dropdown-menu" id="domain-dropdown" aria-labelledby="dropdownMenuButton1">
                 {% foreach ($domains as $domain) { %}
                 <li name="dropdown-list" class="dropdown-item" type="button" data-value="{{ $domain['name'] }}" data-id="{{ $domain['id'] }}">{{ $domain['name'] }}</li>
                    {% } %}        
                </ul>               
              </div>
              <div  class="form-group" id="termDomainDiv">
                <input  type="hidden" id="term_faculty_id" name="term_faculty_id" value=""> 
                <label for="term_faculty">Selected Faculty</label>
               <input type="text" class="form-control" id="term_faculty" name="term_faculty" required readonly/>
              </div>
              <div class="form-group" id="termNameDiv">
                <label for="term_name">Term</label>
                <input type="text" class="form-control" id="term_name" name="term_name" required/>
              </div>
              <div class="form-group" id="termDefinitionDiv">
                <label for="term_definition">Definition</label>
                <textarea class="form-control" id="term_definition" name="term_definition" required></textarea>
              </div>
            </div>
            <div id="termDeleteDiv">
              <p id="termDeleteLabel" class="text-center"></p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" id="btn_save" name="btn_save" class="btn btn-primary">Save</button>
            <button type="button" id="btn_cancel_termModal" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>